<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>To-Do List</title>
</head>
<body>
    <div id="forms">
        <form>
            <input type="text" name="tarefa" placeholder="Nova tarefa">
            <button type="button" name="ok" onclick="submeter(this.form)">ok</button>
        </form>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/4.5.0/firebase.js"></script>
    <script>
      // Initialize Firebase
      var config = {
        apiKey: "AIzaSyDZko3XPnNnQ-zThQLzWfWImMRrNM_vyg0",
        authDomain: "todolist-93f0e.firebaseapp.com",
        databaseURL: "https://todolist-93f0e.firebaseio.com",
        projectId: "todolist-93f0e",
        storageBucket: "",
        messagingSenderId: "16615280625"
      };
      var defaultApp = firebase.initializeApp(config);
      var database = firebase.database();
    </script>

    <script type="text/javascript">
        $(document).ready(function() {
            database.ref('/tarefas/').once('value').then(function(snapshot) {
                var tarefas = snapshot.val();
                for(x in tarefas){
                    var formText = '<form id="' + x + '"> \
                                    <input type="text" name="tarefa" value="' + tarefas[x].tarefa + '">\
                                    <button type="button" onclick="submeter(this.form)">ok</button>\
                                </form>';
                    var form = $(formText);

                    $('#forms').append(form);
                }
            });

        });

        function submeter(form) {
            var tarefasRef = database.ref().child('tarefas').push();
            var tarefaKey = tarefasRef.push().key;

            tarefasRef.set({
                tarefa: form.tarefa.value,
            });
        }
    </script>
</body>
</html>